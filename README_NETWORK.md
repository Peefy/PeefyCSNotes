
# 计算机网络 TCP/IP TCP UDP HTTP

## 计算机网络

**网际互联及OSI七层模型**

* **物理层** : 定义一些电器，机械，过程和规范，如集线器(没有寻址的概念) bit
* **数据链路层** : 定义如何格式化数据，支持错误检测；以太网   frame
* **网络层** : 定义一个逻辑的寻址，选择最佳路径传输，路由数据包； packet
* **传输层** : 提供可靠和尽力而为的传输；TCP UDP 65535个端口
* **会话层** : 控制会话，建立管理终止应用程序会话；SQL ASP PHP JSP
* **表示层** : 格式化数据；ASCII JPEG MP3
* **应用层** : 控制应用程序；http，ftp

**TCP/IP协议**

TCP/IP是因特网的通信协议，是对计算机必须遵守的规则的描述，只有遵守这些规则，计算机之间才能进行通信

* 浏览器与服务器都在使用TCP/IP协议 
* E-mail使用TCP/IP协议
* 因特网网址是TCP/IP协议

TCP/IP 意味着 TCP 和 IP 在一起协同工作。
TCP 负责应用软件（比如您的浏览器）和网络软件之间的通信。
IP 负责计算机之间的通信。
TCP 负责将数据分割并装入 IP 包，然后在它们到达的时候重新组合它们。
IP 负责将包发送至接受者。

**TCP/IP定义**

TCP/IP 是供已连接因特网的计算机进行通信的通信协议。
TCP/IP 指传输控制协议/网际协议（Transmission Control Protocol / Internet Protocol）。
TCP/IP 定义了电子设备（比如计算机）如何连入因特网，以及数据如何在它们之间传输的标准。

**TCP/IP内部**

在 TCP/IP 中包含一系列用于处理数据通信的协议：
* TCP (传输控制协议) - 应用程序之间通信
* UDP (用户数据报协议) - 应用程序之间的简单通信
* IP (网际协议) - 计算机之间的通信
* ICMP (因特网消息控制协议) - 针对错误和状态
* DHCP (动态主机配置协议) - 针对动态寻址

**TCP 使用固定的连接**

TCP用于应用程序之间的通信，会发送一个通信请求。这个请求必须被送到一个确切的地址，在双方“握手”之后，TCP将在两个应用程序之间建立一个全双工(full-duplex)的通信。
这个全双工的通信将占用两个计算机之间的通信线路，直到它被一方或被双方关闭为止。
UDP和TCP很相似，但是更简单，同时可靠性低于TCP

**IP是无连接的**

IP用于计算机之间的通信，IP是无连接的通信协议。

IP是无连接的通信协议。不会占用两个正在通信的计算机之间的通信线路。这样IP降低了对网络线路的需求。每条线可以同时满足许多不同的计算机之间的通信需要。

通过IP，消息(或者其他数据)被分割为小的独立的包，并通过因特网在计算机之间传送。

IP负责将每个包路由至它的目的地

**IP路由器**

当一个IP包从一台计算机被发送，会到达一个IP路由器。

IP路由器负责将这个包路由至它的目的地，直接地或者间接地通过其他的路由器。

在一个相同的通信中，一个包所经由的路径可能会和其他的包不同，而路由器负责根据通信量、网络中的错误或者其他参数来进行正确地寻址

**IP地址**

每个计算机必须有一个IP地址才能够连入互联网

每个IP包必须有一个地址才能够发送到另一台计算机

TCP/IP使用4组数字来为计算机编址。每个计算机必须有一个唯一的4组数字的地址.每组数字必须在0到255之间，并由点号隔开，比如:192.168.1.60

32比特=4字节，TCP/IP使用32个比特来编址。一个计算机字节是8比特。所以TCP/IP使用了4个字节

**IP V6**

IPv6是"Internet Protocol Version 6"的缩写，也被称为下一代互联网协议，是由IETF小组设计用来代替现行的IPv4协议的一种新的IP协议

在RFC1884中，规定的标准语法建议把IPv6地址的128位(16个字节)写成8个16位的无符号整数，每个整数用4个十六进制位表示，这些数之间用冒号(:)分开，例如：

```
686E：8C64：FFFF：FFFF：0：1180：96A：FFFF
```

为了保证零压缩有一个清晰的解释，建议中规定，在任一地址中，只能使用一次零压缩。该技术对已建议的分配策略特别有用，因为会有许多地址包含连续的零串

**域名**

12个阿拉伯数字很难记忆。使用一个名称更容易

用于TCP/IP地址的名字被称为域名。当键入一个域名，域名会被DNS程序翻译为数字

在全世界，数量庞大的DNS服务器被连入因特网。DNS服务器负责将域名翻译为TCP/IP地址，同时负责使用新的域名信息更新彼此的系统

当一个新的域名连同其TCP/IP地址一起注册后，全世界的DNS服务器都会对此信息进行更新

**TCP/IP 是基于 TCP 和 IP 这两个最初的协议之上的不同的通信协议的大集合。**

* **TCP-传输控制协议**
TCP用于从应用程序到网络的数据传输控制，TCP负责在数据传送之前将它们分割为IP包，然后在它们到达的时候将它们重组
* **IP-网际协议(Internet Protocol)**
IP负责计算机之间的通信，IP负责在因特网上发送和接收数据包
* **HTTP-超文本传输协议(Hyper Text Transfer Protocol)**
HTTP负责web服务器与web浏览器之间的通信。HTTP用于从web客户端(浏览器)向web服务器发送请求，并从web服务器向web客户端返回内容(网页).
* **HTTPS-安全的HTTP(HTTP Secure)**
HTTPS负责在web服务器和web浏览器之间的安全通信。
作为有代表性的应用,HTTPS会用于处理信用卡交易和其他的敏感数据
* **SSL-安全套接字层(Secure Sockets Layer)**
SSL协议用于为安全数据传输加密数据
* **SMTP-简易邮件传输协议(Simple Mail Transfer Protocol)**
SMTP用于电子邮件的传输
* **MIME-多用途因特网邮件扩展(Multi-purpose Internet Mail Extensions)**
MIME协议使SMTP有能力通过TCP/IP网络传输多媒体文件，包括声音，视频和二进制数据
* **IMAP-因特网消息访问协议(Internet Message Access Protocol)**
IMAP用于存储和取回电子邮件
* **POP-邮局协议(Post Office Protocol)**
POP用于从电子邮件服务器向个人电脑下载电子邮件
* **FTP-文件传输协议(File Transfer Protocol)**
FTP负责计算机之间的文件传输
* **NTP-网络时间协议(Network Time Protocol)**
NTP用于在计算机之间同步时间(钟)
* **DHCP-动态主机配置协议(Dynamic Host Configuration Protocol)**
DHCP用于向网络中的计算机分配动态IP地址
* **SNMP-简单网络管理协议(Simple Network Management Protocol)**
SNMP用于计算机网络的管理
* **LDAP-轻量级的目录访问协议(Lightweight Directory Access Protocol)**
LDAP用于从因特网搜集关于用户和电子邮件地址的信息
* **ICMP-因特网消息控制协议(Internet Control Message Protocol)**
ICMP负责网络中的错误处理
* **ARP-地址解析协议(Address Resolution Protocol)**
ARP- 用于通过IP来查找基于IP地址的计算机网卡的硬件地址
* **RARP-反向地址转换协议(Reverse Address Resolution Protocol)**
RARP用于通过IP查找基于硬件地址的计算机网卡的IP地址
* **BOOTP-自举协议(Boot Protocol)**
BOOTP用于从网络启动计算机
* **PPTP-点对点隧道协议(Point to Point Tunneling Protocol)**
PPTP用于私人网络之间的连接(隧道)

**HTTP协议**

HTTP协议(HyperText Transfer Protocol,超文本传输协议)是因特网上应用最为广泛的一种网络传输协议，所有的WWW文件都必须遵守这个标准

HTTP是一个基于TCP/IP通信协议来传递数据(HTML文件,图片文件,查询结果)

**HTTP 工作原理**

HTTP协议工作于客户端-服务端架构上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求

*Web服务器有：Apache服务器，IIS服务器(Internet Information Services),Ngnix服务器*

Web服务器根据接收到的请求后，向客户端发送响应信息.HTTP默认端口号为80,但是也可以更改为8080或者其他端口

HTTP三点注意事项：

* **HTTP是无连接的**：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间
* **HTTP是媒体独立的**：只要客户端和服务器知道如何处理的数据内容，任何类型的数据都可以通过HTTP发送，客户端以及服务器指定使用适合的MIME-type内容类型
* **HTTP是无状态的**：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则必须重传，这样可能导致每次连接传送的数据量增大。

**HTTP消息结构**

HTTP是基于客户端/服务端(C/S)的架构模型，通过一个可靠的连接来交换信息，是一个无状态的请求/响应协议。一个HTTP“客户端”是一个应用程序(Web浏览器或其他任何客户端)，通过连接到服务器达到向服务器发送一个或多个HTTP的请求的目的。

一个HTTP“服务器”同样也是一个应用程序(通常是Web服务,如Apache Web服务器或IIS服务器等)，通过接收的客户端的请求并向客户端发送HTTP响应数据.

HTTP使用统一资源表示符(Uniform Resource Identifiers, URI)来传输数据和建立连接.一旦建立连接后，数据消息就通过类似Internet邮件所使用的格式[RFC5322]和多用途Internet邮件扩展(MIME)[RFC2045]来传送

**客户端请求消息**

客户端发送一个HTTP请求到服务器的请求消息包括以下格式：*请求行(request line)*、*请求头部(header)*、*空行*和*请求数据*四个部分组成

**服务器相应消息**

HTTP相应也由四个部分组成，分别是：*状态行*, *消息报头*, *空行*, *相应正文*
```xml
HTTP/1.1 200 OK
Date: Sat, 31, Dec 2005 23:59:59 GMT
Content-Type: text/html;charset=ISO-8859-1
Content-Length: 122

<html>
<head>
<title>Homepage</title>
</head>
<body>
contents
<!-- comments -->
</body>
</html>

```

**使用HTTP GET来向服务器获取数据**

客户端请求

```http
GET /hello.txt HTTP/1.1
User-Agent: curl/7.16.3 libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3
Host: www.example.com
Accept-Language: en, mi
```

服务器相应

```http
HTTP/1.1 200 OK
Date: Mon, 27 Jul 2009 12:28:53 GMT
Server: Apache
Last-Modified: Wed, 22 Jul 2009 19:15:56 GMT
ETag: "34aa387-d-1568eb00"
Accept-Ranges: bytes
Content-Length: 51
Vary: Accept-Encoding
Content-Type: text/plain
```

**HTTP协议的8种请求类型**

HTTP 协议中共定义了八种方法或者叫“动作”来表明对 Request-URI 指定的资源的不同操作方式，具体介绍如下：

* `OPTIONS`: 返回服务器针对特定资源所支持的HTTP请求方法。也可以利用Web服务器发送'*'的请求来测试服务器的功能性
* `HAED`: 向服务器索要与GET请求相一致的响应，只不过响应体将不会被返回。这一方法可以在不必传输整个响应内容的情况下，就可以获取包含在响应消息头中的元信息
* `GET`: 向特定的资源发出请求
* `POST`: 向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的创建和/或已有资源的修改
* `PUT`: 向指定资源位置上传其最新内容
* `DELETE`: 请求服务器删除 Request-URI 所标识的资源
* `TRACE`: 回显服务器收到的请求，主要用于测试或诊断
* `CONNECT`: HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器

虽然HTTP的请求方式有8种，但是我们在实际应用中常用的也就是**get**和**post**,其他请求方式也都可以通过两种方式间接的来实现

**HTTP请求方法**

根据HTTP标准，HTTP请求可以使用多种请求方法。

HTTP1.0定义了三种请求方法：`GET` `POST` 和 `HEAD` 方法

序号|方法|描述
-|-|-
1|GET|请求指定的页面信息，并放回实体主体
2|HEAD|类似于get请求,只不过返回响应中没有具体的内容，用于获取报头
3|POST|向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。
4|PUT|从客户端向服务器传送的数据取代指定的文档的内容。
5|DELETE|请求服务器删除指定的页面。
6|CONNECT|HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。
7|OPTIONS|允许客户端查看服务器的性能。
8|TRACE|回显服务器收到的请求，主要用于测试或诊断。

**HTTP响应头信息**

HTTP请求头提供了关于请求，响应或者其他的发送实体的信息

应答头|说明
-|-
Allow|服务器支持哪些请求方法(如GET/POST等)
Content-Encoding|文档的编码（Encode）方法。只有在解码之后才可以得到Content-Type头指定的内容类型。利用gzip压缩文档能够显著地减少HTML文档的下载时间。Java的GZIPOutputStream可以很方便地进行gzip压缩，但只有Unix上的Netscape和Windows上的IE 4、IE 5才支持它。因此，Servlet应该通过查看Accept-Encoding头（即request.getHeader("Accept-Encoding")）检查浏览器是否支持gzip，为支持gzip的浏览器返回经gzip压缩的HTML页面，为其他浏览器返回普通页面
Content-Length|表示内容长度。只有当浏览器使用持久HTTP连接时才需要这个数据。如果想要利用持久连接的优势，可以把输入文档写入ByteArrayOutputStream，完成后查看其大小，然后把该值放入Content-Length头
Date|当前的GMT时间
Expires|应该在什么时候认为文档已经过期，从而不再缓存它
Last-Modified|文档的最后改动时间。客户可以通过If-Modified-Since请求头提供一个日期，该请求将被视为一个条件GET，只有改动时间迟于指定时间的文档才会返回，否则返回一个304(Not Modified)状态
Location|表示客户应当到哪里去提取文档。Location通常不是直接设置的
Refresh|表示浏览器应该在多少时间之后刷新文档，以秒计。除了刷新当前文档之外，还可以通过指令让浏览器读取指定的页面。*注意：Refresh的意义是“N秒之后刷新本页面或访问指定页面”，而不是“每隔N秒刷新本页面或访问指定页面”。因此，连续刷新要求每次都发送一个Refresh头，而发送204状态码则可以阻止*
Server|服务器名字。Servlet一般不设置这个值，而是由Web服务器自己设置
Set-Cookie|设置和页面关联的Cookie。
WWW-Authenticate|客户应该在Authorization头中提供什么类型的授权信息.在包含401(Unauthorized)状态行的应答中这个头是必需的。*注意Servlet一般不进行这方面的处理，而是让Web服务器的专门机制来控制受密码保护页面的访问*

**HTTP状态码**

当浏览器访问一个网页时，浏览者的浏览器会向网页所在服务器发出请求。当浏览器接收并显示网页前，此网页所在的服务器会返回一个包含HTTP状态码的信息头(server header)用以相应浏览器的请求

HTTP状态码的英文为HTTP Status Code

常见HTTP状态码

* **200**：请求成功 
* **301**：资源(网页等)被永久转移到其他URL
* **404**：请求的资源(网页等)不存在
* **500**：内部服务器错误

**HTTP状态码分类**

HTTP状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。HTTP状态码分为5种类型

分类|描述
-|-
1**|信息，服务器收到请求，需要请求者继续执行操作
2**|成功，操作被成功接收并处理
3**|重定向，需要进一步的操作以完成请求
4**|客户端错误，请求包含语法错误或无法完成请求
5**|服务器错误，服务器在处理请求的过程中发生了错误

**HTTP状态码列表**

状态码|状态码英文名称|中文描述
-|-|-
**100**|Continue|继续。客户端应继续其请求
**101**|Switching Protocols|切换协议。服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议
**200**|OK|请求成功。一般用于GET与POST请求
**201**|Created|已创建。成功请求并创建了新的资源
**202**|Accepted|已接受。已经接受请求，但未处理完成
**203**|Non-Authoritative Information|非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本
**204**|No Content|无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档
**205**|Reset Content|重置内容。服务器处理成功，用户终端（例如：浏览器）应重置文档视图。可通过此返回码清除浏览器的表单域
**206**|Partial Content|部分内容。服务器成功处理了部分GET请求
**300**|Multiple Choices|多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（例如：浏览器）选择
**301**|Moved Permanently|永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替
**302**|Found|临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI
**303**|See Other|查看其它地址。与301类似。使用GET和POST请求查看
**304**|Not Modified|未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源
**305**|Use Proxy|使用代理。所请求的资源必须通过代理访问
**306**|Unused|已经被废弃的HTTP状态码
**307**|Temporary Redirect|临时重定向。与302类似。使用GET请求重定向
**400**|Bad Request|客户端请求的语法错误，服务器无法理解
**401**|Unauthorized|请求要求用户的身份认证
**402**|Payment Required|保留，将来使用
**403**|Forbidden|服务器理解请求客户端的请求，但是拒绝执行此请求
**404**|Not Found|服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置"您所请求的资源无法找到"的个性页面
**405**|Method Not Allowed|客户端请求中的方法被禁止
**406**|Not Acceptable|服务器无法根据客户端请求的内容特性完成请求
**407**|Proxy Authentication Required|请求要求代理的身份认证，与401类似，但请求者应当使用代理进行授权
**408**|Request Time-out|服务器等待客户端发送的请求时间过长，超时
**409**|Conflict|服务器完成客户端的PUT请求是可能返回此代码，服务器处理请求时发生了冲突
**410**|Gone|客户端请求的资源已经不存在。410不同于404，如果资源以前有现在被永久删除了可使用410代码，网站设计人员可通过301代码指定资源的新位置
**411**|Length Required|服务器无法处理客户端发送的不带Content-Length的请求信息
**412**|Precondition Failed|客户端请求信息的先决条件错误
**413**|Request Entity Too Large|由于请求的实体过大，服务器无法处理，因此拒绝请求。为防止客户端的连续请求，服务器可能会关闭连接。如果只是服务器暂时无法处理，则会包含一个Retry-After的响应信息
**414**|Request-URI Too Large|请求的URI过长（URI通常为网址），服务器无法处理
**415**|Unsupported Media Type|服务器无法处理请求附带的媒体格式
**416**|Requested range not satisfiable|客户端请求的范围无效
**417**|Expectation Failed|服务器无法满足Expect的请求头信息
**500**|Internal Server Error|服务器内部错误，无法完成请求
**501**|Not Implemented|服务器不支持请求的功能，无法完成请求
**502**|Bad Gateway|作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应
**503**|Service Unavailable|由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中
**504**|Gateway Time-out|充当网关或代理的服务器，未及时从远端服务器获取请求
**505**|HTTP Version not supported|服务器不支持请求的HTTP协议的版本，无法完成处理

**HTTP Content-Type**

Content-Type,内容类型，一般是指网页中存在的Content-Type，用于定义网络文件的类型和网页的编码，决定浏览器将以什么形式、什么编码读取这个文件，这就是经常看到一些Asp网页点击的结果却是下载到的一个文件或一张图片的原因

[Content-Type对照表](http://www.runoob.com/http/http-content-type.html)

## TCP、UDP、HTTP的异同

* 1.TCP/IP是一个协议组，可以分为三个层次：网络层、传输层和应用层；在网络层有IP协议，ICMP协议、ARP协议、RARP协议和BOOTP协议；在传输层有TCP协议和UDP协议；在应用层有FTP、HTTP、TELNET、SMTP、DNS等协议

* 2.HTTP协议是建立在请求/响应模型上的。首先由客户建立一条与服务器的TCP链接，并发送一个请求到服务器，请求中包含请求方法、URI、协议版本以及相关的MIME样式的消息。服务器响应一个状态行，包含消息的协议版本、一个成功和失败码以及相关的MIME式样的消息

* 3.HTTP/1.0为每一次HTTP的请求/响应建立一条新的TCP链接，因此一个包含HTML内容和图片的页面将需要建立多次的短期的TCP链接。一次TCP链接的建立将需要3次握手。HTTP/1.1将只建立一次TCP的链接而重复地使用它传输一系列的请求/响应 消息，因此减少了链接建立的次数和经常性的链接开销。

TCP（Transmission Control Protocol，传输控制协议）是基于连接的协议，也就是说，在正式收发数据前，必须和对方建立可靠的连接。一个TCP连接必须要经过三次“对话”才能建立起来

UDP（User Data Protocol，用户数据报协议）是与TCP相对应的协议。它是面向非连接的协议，它不与对方建立连接，而是直接就把数据包发送过去！

-|TCP|UDP
-|-|-
是否连接|面向连接|面向非连接
传输可靠性|可靠|不可靠
应用场合|传输大量的数据，对可靠性要求较高的场合|传送少量数据、对可靠性要求不高的场景
速度|慢|快

## 计算机网络问答

### 网络概述

**1. TCP协议在哪一层？IP协议在那一层？HTTP在哪一层？**

OSI的7层从上到下分别是 7 应用层(TELNET，HTTP，FTP，NFS，SMTP) 6 表示层 5 会话层 4 传输层 （TCP，UDP）3 网络层 （IP)）2 数据链路层 1 物理层

### 运输层

**2. 讲一下TCP的连接和释放连接。**

**TCP建立连接（三次握手，即进行了两次确认）：**

* Client向Server发送连接请求
* Server接收到Client的请求后，同意建立连接后向Client发送ACK确认报文，并为这次连接的建立分配资源
* Client接收到对方发来的ACK确认后也向Server发送ACK确认报文，连接建立完成

**TCP拆除连接（四次挥手）：**

数据传输完成后，Client和Server都处于ESTABLISHED状态，通信的双方都可以进行释放连接的动作。
* Client主动发送释放连接的请求，并停止发送数据。Client将连接释放报文段的首部的FIN置为1，其序号为u，它等于前面已传送过的数据的最后一个字节的序号加1。此时Client进入FIN-WAIT-1（终止等待1）状态。
* Server接收到Client的释放请求后发出确认，确认号是u+1，而确认报文段自己的序号是v，等于Server前面已经传送过的数据的最后一个字节的序号加1。接着Server进入CLOSE-WAIT（关闭等待）状态，并且TCP会通知高层应用程序，此时Client到Server的连接已经关闭，但Server到Client的连接仍然存在，因此此时的TCP连接处于半关闭状态。Server仍然有可能会给Client发送数据，Client也要接收。
* Client收到来自对方的确认后，进入FIN-WAIT-2（终止等待2）状态，等待Server释放连接。
* Server发送完数据后发送释放报文段，其应用程序就通知TCP释放连接。Server发送的报文段中必须将FIN置为1。由于在半关闭状态Server可能也发送了数据，因此假定此时Server的序号为w，除此之外，Server也必须重复上次发送的确认号u+1。发送完后Server进入LAST-ACK（最后确认）状态，等待Client确认。
* Client收到释放报文段后发送确认报文段。此时Client并没有释放掉连接，而是进入TIME-WAIT（时间等待）状态，等过了2MSL时间后才进入到CLOSED状态。

**3. TCP有哪些应用场景**

tcp协议是面向连接的，可靠的数据传输协议，但是它的传输数据速率相比于udp协议比较慢。它适用于对数据传输可靠性要求比较高的场景，例如文本传输之类的。TCP协议需要三次握手通信成功后进行建立。

应用场景：互联网和企业网上客户端应用，数据传输性能让位于数据传输的完整性，可控制性和可靠性。

**4. tcp为什么可靠**

TCP和UDP协议的区别在于TCP可以提供可靠的网络数据传输，但UDP不能。

ACK机制：由于通信过程的不可靠性，传输的数据不可避免的会出现丢失、延迟、错误、重复等各种状况，TCP协议为解决这些问题设计了一系列机制。
这个机制的核心，就是发送方向接收方发送数据后，接收方要向发送方发送ACK（回执）。如果发送方没接收到正确的ACK，就会重新发送数据直到接收到ACK为止。
比如：发送方发送的数据序号是seq，那么接收方会发送seq + 1作为ACK，这样发送方就知道接下来要发送序号为seq + 1的数据给接收方了。

* **数据丢失或延迟**-发送方发送数据seq时会起一个定时器，如果在指定时间内没有接收到ACK seq + 1，就把数据seq再发一次。
* **数据乱序**-接收方上一个收到的正确数据是seq + 4，它返回seq + 5作为ACK。这时候它收到了seq + 7，因为顺序错了，所以接收方会再次返回seq + 5给发送方。
* **数据错误**-每一个TCP数据都会带着数据的校验和。接收方收到数据seq + 3以后会先对校验和进行验证。如果结果不对，则发送ACK seq + 3，让发送方重新发送数据。
* **数据重复**-接收方直接丢弃重复的数据即可。

TCP还做了很多对传输过程的优化，比如滑动窗口机制，比如慢启动机制。

**5. tcp为什么要建立连接**

建立可靠性连接，主机A向主机B发送连接请求会发送一个包，主机B接收到主机A的请求同意连接会向主机A返回一个包，主机A确认无误后会再次发送给主机B确认

**6. 阐述TCP的4次挥手**

数据传输完成后，Client和Server都处于ESTABLISHED状态，通信的双方都可以进行释放连接的动作。
* Client主动发送释放连接的请求，并停止发送数据。Client将连接释放报文段的首部的FIN置为1，其序号为u，它等于前面已传送过的数据的最后一个字节的序号加1。此时Client进入FIN-WAIT-1（终止等待1）状态。
* Server接收到Client的释放请求后发出确认，确认号是u+1，而确认报文段自己的序号是v，等于Server前面已经传送过的数据的最后一个字节的序号加1。接着Server进入CLOSE-WAIT（关闭等待）状态，并且TCP会通知高层应用程序，此时Client到Server的连接已经关闭，但Server到Client的连接仍然存在，因此此时的TCP连接处于半关闭状态。Server仍然有可能会给Client发送数据，Client也要接收。
* Client收到来自对方的确认后，进入FIN-WAIT-2（终止等待2）状态，等待Server释放连接。
* Server发送完数据后发送释放报文段，其应用程序就通知TCP释放连接。Server发送的报文段中必须将FIN置为1。由于在半关闭状态Server可能也发送了数据，因此假定此时Server的序号为w，除此之外，Server也必须重复上次发送的确认号u+1。发送完后Server进入LAST-ACK（最后确认）状态，等待Client确认。
* Client收到释放报文段后发送确认报文段。此时Client并没有释放掉连接，而是进入TIME-WAIT（时间等待）状态，等过了2MSL时间后才进入到CLOSED状态。

**7. 讲一下浏览器从接收到一个URL到最后展示出页面，经历了哪些过程。**

* **输入网址**-输入访问网站地址：俗称url
* **缓存解析**-浏览器获取url后，之后去解析，先去缓存当中看看有没有，从浏览器缓存-系统缓存-路由器缓存当中查看，如果有从缓存当中显示页面。缓存就是把之前访问的web资源，如js，css，图片保存在本机的内存或者磁盘当中
* **域名解析**-DNS解析：域名到IP地址的转换。域名的解析工作由DNS服务器完成，解析后可以获取域名相应的IP地址
* **tcp连接，三次握手**-域名解析之后，浏览器向服务器发起http请求，tcp连接，三次握手建立tcp连接。TCP协议是面向连接的，所以在传输数据前必须建立连接。1.客户端向服务器发送连接请求报文；2.服务器接受客户端发送的连接请求后回复ACK报文，并为这次连接分配资源；3.客户端接收到ACK报文后也向服务器端发生ACK报文，并分配资源
* **服务器收到请求**-服务器收到浏览器发送的请求信息，返回一个响应头和一个响应体。
* **页面渲染**-浏览器收到服务器发送的响应头和响应体，进行客户端渲染，生成Dom树、解析css样式、js交互

**8. http和https的区别**

HTTP：是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。

HTTPS：是以安全为目标的HTTP通道，简单讲是HTTP的安全版，即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。HTTPS协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。

**9. http的请求有哪些，应答码502和504有什么区别**

* **OPTIONS**：返回服务器针对特定资源所支持的HTTP请求方法。也可以利用向Web服务器发送'*'的请求来测试服务器的功能性。
* **HEAD**：向服务器索要与GET请求相一致的响应，只不过响应体将不会被返回。这一方法可以在不必传输整个响应内容的情况下，就可以获取包含在响应消息头中的元信息。
* **GET**：向特定的资源发出请求。
* **POST**：向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的创建和/或已有资源的修改。
* **PUT**：向指定资源位置上传其最新内容。
* **DELETE**：请求服务器删除 Request-URI 所标识的资源。
* **TRACE**：回显服务器收到的请求，主要用于测试或诊断。
* **CONNECT**：HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。虽然 HTTP 的请求方式有 8 种，但是我们在实际应用中常用的也就是 get 和 post，其他请求方式也都可以通过这两种方式间接的来实现。

502表示错误网关，无效网关 。 504表示网关超时，说明服务器作为网关或代理，但是没有及时从上游服务器收到请求。

**10. http1.1和1.0的区别**

**11. 说说ssl四次握手的过程**

**12. 304状态码有什么含义？**

### 网络层

**13. arp协议，arp攻击**

**14. icmp协议**

**15. 讲一下路由器和交换机的区别？**

### 应用层

**16. DNS寻址过程**

**17. 负载均衡反向代理模式优点及缺点**

**18. **

**19. **

**20. **


